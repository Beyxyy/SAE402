<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            margin: 0;
        }

        #labyrinthe{
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            width: 100%;
        }

        .pipe{
            transform-origin: center;
            display: flex;
            margin: auto;
        }

        .pipe img{
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="labyrinthe">
         <div class="pipe">
            <img src="droit_1.png" alt="">
        </div>
       <div class="vide"></div>
       <div class="vide"></div>
       <div class="vide"></div>
       <div class="vide"></div>

        <div class="pipe angle juste " data-ini="1" data-juste="3" data-num=1>
            <img src="angle_1.png" alt="">
        </div>
        <div class="pipe droit juste" data-ini="1" data-juste="2" data-num=1>
            <img src="droit_1.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="3" data-juste="1" data-num=3>
            <img src="angle_3.png" alt="">
        </div>
        <div class="pipe croix">
            <img src="croix.png" alt="">
        </div>
        <div class="pipe angle" data-ini="2" data-num=2>
            <img src="angle_2.png" alt="">
        </div>


        <div class="pipe croix">
            <img src="croix.png" alt="">
        </div>
        <div class="pipe droit" data-ini="2" data-num=2>
            <img src="droit_2.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="2" data-juste="3" data-num=2>
            <img src="angle_2.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="3" data-juste="1" data-num=3>
            <img src="angle_3.png" alt="">
        </div>
        <div class="pipe droit" data-ini="1" data-num=1>
            <img src="droit_1.png" alt="">
        </div>

        <div class="pipe vide"></div>
        <div class="pipe angle juste" data-ini="1" data-juste="4" data-num=1>
            <img src="angle_1.png" alt="">
        </div>
        <div class="pipe droit juste" data-ini="1" data-juste="2" data-num=1>
            <img src="droit_1.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="3" data-juste="2" data-num=3>
            <img src="angle_3.png" alt="">
        </div>
        <div class="pipe droit" data-ini="2" data-num=2>
            <img src="droit_2.png" alt="">
        </div>

        <div class="pipe angle juste" data-ini="1" data-juste="4" data-num=1>
            <img src="angle_1.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="2" data-juste="2" data-num=2>
            <img src="angle_2.png" alt="">
        </div>
        <div class="pipe croix">
            <img src="croix.png" alt="">
        </div>
        <div class="pipe droit" data-ini="1" data-num=1>
            <img src="droit_1.png" alt="">
        </div>
        <div class="pipe vide"></div>

        
        <div class="pipe droit juste" data-ini="2" data-juste="1" data-num=2>
            <img src="droit_2.png" alt="">
        </div>
        <div class="pipe droit" data-ini="1" data-num=1>
            <img src="droit_1.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="2" data-juste="4" data-num=2>
            <img src="angle_2.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="1" data-juste="1" data-num=1>
            <img src="angle_1.png" alt="">
        </div>
        <div class="pipe croix">
            <img src="croix.png" alt="">
        </div>

        <div class="pipe angle juste" data-ini="1" data-juste="3" data-num=1>
            <img src="angle_1.png" alt="">
        </div>
        <div class="pipe droit juste" data-ini="1" data-juste="2" data-num=1>
            <img src="droit_1.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="4" data-juste="2" data-num=4>
            <img src="angle_4.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="1" data-juste="3" data-num=1>
            <img src="angle_1.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="3" data-juste="1" data-num=3>
            <img src="angle_3.png" alt="">
        </div>

        <div class="pipe angle juste" data-ini="2" data-juste="4" data-num=2>
            <img src="angle_2.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="1" data-juste="1" data-num=1>
            <img src="angle_1.png" alt="">
        </div>
        <div class="pipe croix">
            <img src="croix.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="2" data-juste="4" data-num=2>
            <img src="angle_2.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="4" data-juste="2" data-num=4>
            <img src="angle_4.png" alt="">
        </div>

        <div class="pipe droit juste" data-ini="2" data-juste="1" data-num=2>
            <img src="droit_2.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="2" data-juste="3" data-num=2>
            <img src="angle_2.png" alt="">
        </div>
        <div class="pipe droit juste" data-ini="1" data-juste="2" data-num=1 >
            <img src="droit_1.png" alt="">
        </div>
        <div class="pipe angle juste" data-ini="4" data-juste="2" data-num=4>
            <img src="angle_4.png" alt="">
        </div>
        <div class="pipe droit" data-ini="2" data-num=2>
            <img src="droit_2.png" alt="">
        </div>

        <div class="pipe">
            <img src="droit_1.png" alt="">
        </div>
       <div class="vide"></div>
       <div class="vide"></div>
       <div class="vide"></div>
       <div class="vide"></div>
        
    </div>

    <butto id="submit">submit</button>
    <script>
        document.querySelectorAll(".pipe").forEach(e=>{
            e.addEventListener("click", rotate);
        });

        let reslut = document.querySelector("#submit").addEventListener("click", verif);
    

        //fonction de modification du dataset avec la position actuelle de la pièce 
        function rotate(){
            let num_actuel = parseInt(this.dataset.num);
            if(this.classList.contains("angle")){
                if(num_actuel+1>4){
                    num_actuel=1;
                    // let rota=(num_actuel-1)*90;
                    // this.style.transform ='rotate('+rota+'deg)';
                    this.style.transform+="rotate(90deg)";
                    return this.dataset.num=num_actuel;
                    
                }
                else{
                    // let rota=num_actuel*90;
                    // this.style.transform ='rotate('+rota+'deg)';
                    this.style.transform+="rotate(90deg)";
                    return this.dataset.num=num_actuel+1;
                    
                }
                
            }
            if(this.classList.contains("droit")){
                if(num_actuel+1>2){
                    console.log("if : "+num_actuel)
                    num_actuel=1;
                    // let rota=(num_actuel-1)*90;
                    // this.style.transform ='rotate('+rota+'deg)';
                    this.style.transform+="rotate(90deg)";
                    return this.dataset.num=num_actuel;
                    
                }
                else{
                    console.log("else : "+num_actuel)
                    // let rota=num_actuel*90;
                    // this.style.transform ='rotate('+rota+'deg)';
                    this.style.transform+="rotate(90deg)";
                    return this.dataset.num=num_actuel+1;
                    
                }
            }
        }

        function verif(){
            let tableau=[];
            document.querySelectorAll('.juste').forEach(e=>{
                if(e.dataset.juste && e.dataset.num){                    
                    if(e.dataset.juste == e.dataset.num){
                        console.log("l'incompétente sait faire copier coller");
                    }
                    else{
                        tableau.push(e);
                    }

                }
            });
            if(tableau.length){
                console.log(tableau);
                alert(false);
                refresh();
            }
            else{
                console.log(tableau);
                alert(true);
            }
        }

        function refresh(){
            document.querySelectorAll('.pipe').forEach(elt=>{
                elt.dataset.num=elt.dataset.ini;
                elt.style.transform ='rotate(0deg)';
            });
            return true;
        }
    </script>
</body>
</html>